<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Video</title>
    <meta name="description" content="Video - A-Frame" name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/16/Stats.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.5/dist/mindar-image.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.5/dist/mindar-image-aframe.prod.js"></script>


    <script>
        document.addEventListener("DOMContentLoaded", function () {

            // document.addEventListener("DOMContentLoaded", function () {
            //     const videoCount = 2;
            //     for(let i = 0; i < videoCount; i++) {
            //         let el = document.querySelector(i.toString());
            //         el.addEventListener("targetLost", event => {
            //             console.log("lost");
            //             console.log(event);
            //             el.pause();
            //         });
            //         el.addEventListener("click", event => {
            //             console.log("click");
            //             console.log(event);
            //             if(el.isPlaying) {
            //                 el.pause();
            //             } else {
            //                 el.play();
            //             }
            //         });
            //     }
            // });

            AFRAME.registerComponent('videohandler', {
                init: function () {
                    var marker = this.el;

                    this.vid = document.querySelector("#vid");

                    marker.addEventListener('markerFound', function () {
                        this.vid.play();
                    }.bind(this));

                    marker.addEventListener('markerLost', function () {
                        this.vid.pause();
                        this.vid.currentTime = 0;
                    }.bind(this));
                }
            });
            
            var met = document.querySelector('#0');
            var butter = document.querySelector('#1');
            met.addEventListener('click', function () {
                met.play();
            })

            butter.addEventListener('click', function () {
                butter.play();
            });
        });
    </script>
</head>

</head>

<body>
    <a-scene mindar-image="imageTargetSrc: targets_combined.mind; maxTrack: 1" color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">
        <a-assets>
            <video id="meteor" src="meteor_480p_crf16.mp4" loop="true" autoplay="true" webkit-playsinline playsinline></video>
            <video id="whiteButterfly" src="white_butterfly_480p_crf16.mp4" loop="true" autoplay="true"></video>
        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: true"></a-camera>

        <a-entity id="00" mindar-image-target="targetIndex: 0">
            <a-video id="0" class="clickable" src="#meteor" width="3" heigth="2" position="0 0 0" scale="0.7 0.7 0.7"
                play="true"></a-video>
        </a-entity>
        <a-entity id="11" mindar-image-target="targetIndex: 1">
            <a-video id="1" class="clickable" src="#whiteButterfly" width="3" heigth="2" position="0 0 0"
                scale="0.7 0.7 0.7" play="true"></a-video>
        </a-entity>

    </a-scene>
</body>

</html>